{"version":3,"sources":["webpack:///./src/weixin/app.js?b899"],"names":["use","attach","document","body","localStorage","user","commit","params","viewSourceUrl","sessionStorage","setItem","referrer","routerMap","routerNew","i","window","location","href","indexOf","SCODE","el","router","store","render","h","substr","uidObj","uid","spreadToken","get","host","then","console","log","res","data","scode","mobTemplate","JSON","stringify"],"mappings":"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","file":"0.9ad46edbfc3cf567c2eb.hot-update.js","sourcesContent":["import Vue from \"vue\";\r\nimport VueResource from \"vue-resource\"\r\nimport VueRouter from \"vue-router\"\r\nimport vScroll from \"vue-scroll\"\r\nimport {state} from './vuex/state'\r\n\r\nVue.use(VueResource)\r\nVue.use(VueRouter)\r\nVue.use(vScroll)\r\nimport routerV2 from \"./router/router\"\r\nimport store from \"./vuex/store\"\r\nimport App from \"./views/App.vue\"\r\nimport fastclick from 'fastclick'\r\n\r\n\r\n/*********************************刘洋新增配置********************************/\r\nimport routerV3 from './router/router_v3'\r\nimport routerEmpty from './router/router_empty'\r\nimport routerV3New from './router/router_v3new'\r\nimport routerV2New from './router/router_v2new'\r\nimport axios from 'axios'\r\nimport urlParse from './utils/urlParse.js'\r\nimport getUidObj from './utils/getUid.js'\r\n\r\n\r\n// var VConsole = require('vconsole');\r\n// var vConsole = new VConsole();\r\n\r\nfastclick.attach(document.body)\r\n\r\n//首页图片轮播跳外链后，如果是同域的跳转，查询本地存储是否有用户信息，决定跳转后的登陆状态\r\nif(localStorage.user){\r\n    store.commit('CHANGE_ISLOGIN',1);\r\n}\r\n\r\n\r\n\r\nvar params = urlParse();\r\n\r\nif (params.viewSourceUrl){\r\n    sessionStorage.setItem('viewSourceUrl',params.viewSourceUrl);\r\n}else{\r\n    sessionStorage.setItem('viewSourceUrl', document.referrer);\r\n}\r\n\r\n\r\n\r\n// if (params.viewSourceUrl) {\r\n//     store.commit('CHANGE_VIEW_SOURCE_URL', params.viewSourceUrl);\r\n// }\r\nvar routerMap;\r\nvar routerNew = {'v2_new': routerV2New, 'v3_new': routerV3New}\r\n//判断学校版本\r\nvar i = window.location.href.indexOf('scode=');\r\nvar SCODE;\r\nif (i == -1) {\r\n    SCODE = '';\r\n    routerMap = routerV2;\r\n    new Vue({\r\n        el: \"#app\",\r\n        router: routerMap,\r\n        store,\r\n        render: h => h(App)\r\n    })\r\n} else {\r\n    SCODE = window.location.href.substr(i + 6, 6);\r\n\r\n    var uidObj = getUidObj();\r\n    var uid = uidObj.uid;\r\n\r\n    localStorage.setItem('scode',SCODE);\r\n    sessionStorage.setItem('uid',uid?uid:'');\r\n\r\n\r\n    if (uidObj.spreadToken) {\r\n        //就算地址栏有spreadToken，也要通过请求判断是否是该用户的第一次扫码的spreadToken\r\n        axios.get(state.host + '/front/spread/bindUserAndSpread?frontUserId=' + (uid?uid:'') + '&spreadToken=' + uidObj.spreadToken).then(res => {\r\n            console.log(res);\r\n            // alert('请求接口为：'+(state.host + '/front/spread/bindUserAndSpread?frontUserId=' + (uid?uid:'') + '&spreadToken=' + uidObj.spreadToken))\r\n            // alert('接口返回值为：'+res.data.data)\r\n            sessionStorage.setItem('spreadToken', res.data.data);\r\n            // alert('sessionStorage中的spreadToken为：'+sessionStorage.spreadToken)\r\n        })\r\n    } else {\r\n        axios.get(state.host + '/front/spread/getSpreaderByUserId?frontUserId=' + (uid?uid:'') + '&sCode=' + localStorage.scode).then(res => {\r\n            if (res.data.data) {\r\n                sessionStorage.setItem('spreadToken', res.data.data);\r\n            } else {\r\n                sessionStorage.setItem('spreadToken', '');\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    axios.get(state.host + '/front/template/findSchool/' + SCODE).then((res) => {\r\n\r\n        store.commit('CHANGE_ALLSCHOOLINFO',res.data)\r\n        console.log(res.data.mobTemplate);\r\n        if (i == -1) {\r\n            routerMap = routerV2;\r\n        } else {\r\n            if (JSON.stringify(res.data) == \"{}\") {\r\n                routerMap = routerEmpty;\r\n            } else if (res.data.mobTemplate == 'v3') {\r\n                routerMap = routerV3;\r\n            } else if (res.data.mobTemplate == 'v2') {\r\n                routerMap = routerV2;\r\n            } else {\r\n                store.commit('CHANGE_VERSION', res.data.mobTemplate);\r\n                sessionStorage.setItem('mVersion', res.data.mobTemplate);\r\n                routerMap = routerNew[res.data.mobTemplate];\r\n            }\r\n        }\r\n\r\n        new Vue({\r\n            el: \"#app\",\r\n            router: routerMap,\r\n            store,\r\n            render: h => h(App)\r\n        })\r\n    })\r\n}\r\n\r\n\r\n/**************************************************************************/\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/weixin/app.js"],"sourceRoot":""}