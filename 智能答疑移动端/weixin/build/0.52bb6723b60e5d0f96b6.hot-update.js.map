{"version":3,"sources":["webpack:///articleList.vue?ad67","webpack:///./src/weixin/views/articleList.vue?3161*"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AACA;;AACA;;;;AAGA;;AACA;;;;AACA;;;;AAEA;;;;;;;gEAEA;2BACA;yDACA;wGACA;;AAEA;mBAEA;;8BACA;mCACA;AACA;AACA;AACA;0BACA;;2BAEA;sBACA;gCACA;yBACA;qBACA;qBACA;sBACA;sBACA;8BACA;0BACA;yBAEA;AAZA;AAaA;;;gDAEA;qCACA;AACA;gCACA;qCACA;AACA;sCACA;2EACA;AAEA;AAVA;;wCAaA;AAFA;AAGA;+CACA;8CACA;8CACA;yCACA;iDACA;mBACA;iDACA;AACA;wFACA;iDACA;mBACA;iDACA;AACA;AACA;wEACA;gDACA;;AAEA;sDACA;AACA;;AACA;;+CACA;4BACA;2BACA;mCACA;6DACA;uEACA;mBACA;2DACA;AACA;oCACA;4IACA,sCACA;oCACA;kCACA;+CACA;qCACA;uBACA;8EACA;AACA;8BACA;+CACA;AACA;AACA;;AACA;;oCACA;0HACA,2BACA;2DACA;gDACA;0DACA;sEACA;sEACA;6CACA;AACA;AACA;AACA;2DACA;iCACA;iCACA;uCACA;yCACA;iDACA;2DACA;uBACA;+CACA;AACA;0CACA;iDACA;oEACA;gFACA;mDACA;8CACA;wJACA,sCACA;wCACA;0DAGA;;AAEA;;yCACA;2CACA;wEACA;+CACA;yDACA;yDACA;yFACA;AACA;mCACA;uEACA;yDACA;AACA;AACA;4BACA;+HAEA;;oHAGA;sCACA;oCACA;AAGA;;AACA;8CACA;wBAGA;AAEA;;oBACA;uCACA;4LACA,CACA;mBAEA;8BACA;2DACA;AACA;+BACA;AAEA;;;4CAIA;;4BACA;iCACA;+BAGA;;wBACA;mCACA;wLACA,CACA;eACA;AACA;;iDAEA,CACA;8CACA;mCACA;iBACA;AACA;;;;AAGA;;oCACA;0HACA,2BACA;2DACA;gDACA;0DACA;sEACA;sEACA;6CACA;AACA;AACA;AAEA;;2DACA;iCACA;iCACA;uCACA;yCACA;iDACA;2DACA;uBACA;+CACA;AACA;0CAGA;;gHAGA;;iDACA;oEACA;gFACA;mDACA;8CACA;wJACA,sCACA;0DACA;sFAEA;;AAEA;;yCACA;2CACA;wEACA;+CACA;yDACA;yDACA;yFACA;AACA;mCACA;uEACA;yDACA;AACA;AACA;4BACA;+HAEA;;oHAGA;sCACA;oCACA;AAGA;;AACA;8CACA;wBAEA;;2DACA;;+HAGA;AAFA;;qCAKA;AAFA,2CAGA;uCACA;;0CAEA;+CACA;uDACA;kDACA;uDACA;2JAGA;AARA;;6CASA;;qHAEA;AACA;wFACA;4DACA;AACA;AACA;0DACA;AACA;AAGA;AAXA;;;qHAaA;;AACA;AAEA;iMACA;wFACA;AACA;6CACA;4DACA;AACA;AACA;0DACA;AACA;AAGA;AAhBA;AAkBA;;gDACA;AACA;AACA;AACA;AACA;sCACA;oCACA;AAGA;AAEA;;oBAEA;8BACA;2DACA;AACA;+BAGA;AAEA;AArKA;;AAsKA;;kBAEA;;;AAIA;;;gCACA;sHACA;;AAGA;uDACA;4CACA;sDACA;kEACA;kEACA;AACA;yCACA;AACA;AACA;AACA;0BACA;sCACA;AACA;AACA;mBACA;sCACA;AAEA;;uDACA;6BACA;6BACA;mCACA;qCACA;6CACA;uDACA;mBACA;2CACA;AAEA;;sCACA;iDACA;0CACA;mBACA;0CACA;AAMA;;4GAGA;;6CACA;gEACA;4EACA;+CACA;0CACA;oJACA,sCACA;;;AAEA;;AAGA;;AAIA;;;AAEA;;qCACA;uCACA;oEACA;2CACA;qDACA;qDACA;qFACA;AACA;+BACA;mEACA;qDACA;AACA;AACA;wBACA;2HAEA;;gHAGA;kCACA;gCACA;AAGA;;AACA;0CACA;oBAEA;;uDACA;;2HAGA;AAFA;;iCAKA;AAFA,uCAGA;AACA;mCACA;;sCAEA;2CACA;mDACA;8CACA;mDACA;uJAEA;AAPA;yCAQA;;iHAEA;AACA;oFACA;wDACA;AACA;AACA;sDACA;AACA;AAGA;AAXA;;;iHAaA;;AACA;AAEA;6LACA;oFACA;AACA;yCACA;wDACA;AACA;AACA;sDACA;AACA;AAGA;AAhBA;AAkBA;;4CACA;AACA;AACA;AACA;AACA;kCACA;gCACA;AAEA;AAEA;;gBACA;mCACA;wLACA,CACA;eAEA;0BACA;uDACA;AACA;2BAGA;;gCACA;0BACA;0CACA;AACA;AACA;AACA;AAjgBA,E;;;;;;;ACjCA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC,qB","file":"0.52bb6723b60e5d0f96b6.hot-update.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"second_navs\" :style=\"{'border-bottom': '2px solid '+$store.state.themeColor}\">\r\n            <div class=\"second_navs_prev\" ref=\"second_navs_prev\" style=\"display: none;\"></div>\r\n            <div v-scroll=\"scrollAction\" class=\"swiper-container second_navs_swiper\" ref=\"second_navs_swiper\">\r\n                <div class=\"swiper-wrapper\">\r\n                    <div v-for='(obj,idx) of secondNavData'\r\n                         :class=\"obj.catId==secCatId?'swiper-slide active':'swiper-slide'\"\r\n                         @click=\"tapAction(idx,obj.catId)\">\r\n                        <h4 v-text=\"obj.name\" :style=\"{color: idx==activeIndex?$store.state.themeColor:''}\"></h4>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"second_navs_next\" ref=\"second_navs_next\"></div>\r\n        </div>\r\n        <div class=\"container\" :key=\"(new Date()).getTime()\">\r\n\r\n            <v-subNav :tapIndex=\"tapIndex\" :mySubConData2=\"mySubConData2\"></v-subNav>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n<script type=\"text/javascript\">\r\n    import \"../css/articleList.scss\";\r\n    import $ from \"../lib/jquery-1.11.3.js\";\r\n    import {\r\n        mapActions\r\n    } from 'vuex'\r\n    import piwik from '../utils/piwik.js'\r\n    import count from '../utils/count.js'\r\n    import urlAddToken from '../utils/urlAddToken.js'\r\n\r\n    export default {\r\n        beforeRouteEnter(to, from, next){\r\n            next(vm => {\r\n                if (from.path.indexOf('articleDetail') > -1) {\r\n                    vm.tapIndex = sessionStorage.getItem('tapIndex') ? sessionStorage.getItem('tapIndex') : 0;\r\n                    vm.mySubConData2 = sessionStorage.getItem('subConData2') ? JSON.parse(sessionStorage.getItem('subConData2')) : [];\r\n//                    alert(vm.tapIndex);\r\n                } else {\r\n\r\n                    vm.tapIndex = 0;\r\n                    vm.mySubConData2 = [];\r\n                }\r\n            });\r\n        },\r\n        data() {\r\n            return {\r\n                mySubConData2: [],\r\n                tapIndex: 0,\r\n                second_navs_swiper: null,\r\n                activeIndex: 0,\r\n                curPage: 1,\r\n                endFlag: false,\r\n                ajaxFlag: false,\r\n                firstTap: true,\r\n                articleListCatId: '',\r\n                canFindCatId: 1,\r\n                secondCatId:''\r\n            }\r\n        },\r\n        computed: {\r\n            secondNavData: function () {\r\n                return this.$store.state.secondNavData\r\n            },\r\n            catId: function () {\r\n                return this.$route.query.catId\r\n            },\r\n            secCatId:function(){\r\n                return this.secondCatId?this.secondCatId:this.$route.query.catId\r\n            }\r\n        },\r\n        components: {\r\n            \"v-subNav\": require(\"../component/articleListSubNav.vue\"),\r\n        },\r\n        methods: {\r\n            scrollAction: function (e) {\r\n                var second_navs_prev = this.$refs.second_navs_prev\r\n                var second_navs_next = this.$refs.second_navs_next\r\n                if (e.target.scrollLeft > 0) {\r\n                    second_navs_prev.style.display = \"block\"\r\n                } else {\r\n                    second_navs_prev.style.display = \"none\"\r\n                }\r\n                if (e.target.scrollLeft + e.target.offsetWidth < e.target.scrollWidth - 10) {\r\n                    second_navs_next.style.display = \"block\"\r\n                } else {\r\n                    second_navs_next.style.display = \"none\"\r\n                }\r\n            },\r\n            ...mapActions(['CHANGE_SUBNAVDATA', 'CHANGE_SUBCONDATA', 'CHANGE_SECONDNAVDATA']),\r\n            tapAction: function (idx, cid) {\r\n                sessionStorage.setItem('tapIndex', 0);\r\n//                sessionStorage.setItem('subConData2', JSON.stringify({}));\r\n                this.$router.push('/articleList?catId=' + cid)\r\n            },\r\n            getScrollList: function () {\r\n                if (this.ajaxFlag || this.endFlag) return;\r\n                this.ajaxFlag = true\r\n                var idx = this.activeIndex\r\n                var articleListCatId = ''\r\n                if (this.secondNavData[idx].children.length > 0) {\r\n                    articleListCatId = this.secondNavData[idx].children[0].catId\r\n                } else {\r\n                    articleListCatId = this.secondNavData[idx].catId\r\n                }\r\n                var state = this.$store.state\r\n                this.$http.get(state.host + state.baseUrl + '/infoContent/getInfoContentlist?curPage=' + this.curPage + '&pageSize=20&catId=' + articleListCatId)\r\n                    .then(res => {\r\n                        var data = res.data.data\r\n                        this.ajaxFlag = false\r\n                        if (!data || data.length == 0) {\r\n                            this.endFlag = true\r\n                        } else {\r\n                            this.CHANGE_SUBCONDATA(state.subConData.concat(res.data.data));\r\n                        }\r\n                    }, err => {\r\n                        alert('getScrollList()请求失败:' + err)\r\n                    })\r\n            },\r\n            getInit: function () {\r\n                var state = this.$store.state\r\n                this.$http.get(state.host + state.baseUrl + '/infoCat/getInfoCatlist?sCode=' + state.scode + '&catId=' + this.catId)\r\n                    .then(res => {\r\n                        this.$store.commit('CHANGE_LOADINGFLAG', false)\r\n                        var secondCatId = res.data.data.secondCatId\r\n                        this.CHANGE_SECONDNAVDATA(res.data.data.menu);\r\n                        for (var i = 0; i < this.secondNavData.length; i++) {\r\n                            if (secondCatId == this.secondNavData[i].catId) {\r\n                                this.activeIndex = i\r\n                                break\r\n                            }\r\n                        }\r\n                        i = i >= this.secondNavData.length ? 0 : i\r\n                        this.endFlag = false\r\n                        this.curPage = 1;\r\n                        var articleListCatId = ''\r\n                        var data = res.data.data.menu\r\n                        if (data[i].children.length > 0) {\r\n                            articleListCatId = data[i].children[0].catId\r\n                        } else {\r\n                            articleListCatId = data[i].catId\r\n                        }\r\n                        this.articleListCatId = articleListCatId\r\n                        this.CHANGE_SUBNAVDATA(data[i].children);\r\n                        if (this.$children[0].$refs.sub_navs_swiper_wrap) {\r\n                            this.$children[0].$refs.sub_navs_swiper_wrap.scrollLeft = 0;\r\n                            this.$children[0].tapIndex = 0;\r\n                            var state = this.$store.state\r\n                            this.$http.get(state.host + state.baseUrl + '/infoContent/getInfoContentlist?curPage=' + this.curPage + '&pageSize=20&catId=' + articleListCatId)\r\n                                .then(res => {\r\n                                    console.log(res.data);\r\n                                    this.CHANGE_SUBCONDATA(res.data.data);\r\n\r\n\r\n                                    //横向类名菜单定位优化\r\n\r\n                                    var totalWidth = 0;\r\n                                    var currentWidth = 0;\r\n                                    var allSlides = document.getElementsByClassName('swiper-slide');\r\n                                    var length = allSlides.length;\r\n                                    for (var r = 0; r < length; r++) {\r\n                                        if (r == this.activeIndex) {\r\n                                            currentWidth = parseFloat(getComputedStyle(allSlides[r]).width);\r\n                                            break;\r\n                                        } else {\r\n                                            var w = getComputedStyle(allSlides[r]).width;\r\n                                            totalWidth += parseFloat(w);\r\n                                        }\r\n                                    }\r\n                                    var _this = this;\r\n                                    var distance = parseFloat(getComputedStyle(_this.$refs.second_navs_swiper).width) / 2 - currentWidth / 2;\r\n\r\n                                    $('.second_navs_swiper').animate({scrollLeft: totalWidth - distance}, 300);\r\n\r\n\r\n                                }, err => {\r\n                                    console.log(err)\r\n                                })\r\n\r\n\r\n                            //    组件更新的时候配置微信SDK接口        *************************************************************************\r\n                            var state = this.$store.state\r\n                            var _this = this;\r\n\r\n\r\n                        }\r\n\r\n                        var _this = this;\r\n                        setTimeout(() => {\r\n                            count(remote_ip_info.province, remote_ip_info.city, localStorage.scode, location.href, null, null, _this.$store.state.viewSourceUrl).then(res => {\r\n                            });\r\n                        }, 1000)\r\n\r\n                    }, err => {\r\n                        this.$store.commit('CHANGE_LOADINGFLAG', false)\r\n                    })\r\n                this.activeIndex = 0;\r\n            }\r\n        },\r\n        watch: {\r\n            '$route'(to, from) {\r\n\r\n\r\n                this.tapIndex = 0;\r\n                this.mySubConData2 = [];\r\n                this.secondCatId='';\r\n\r\n\r\n                var _this = this;\r\n                setTimeout(() => {\r\n                    count(remote_ip_info.province, remote_ip_info.city, localStorage.scode, location.href, null, null, _this.$store.state.viewSourceUrl).then(res => {\r\n                    });\r\n                }, 1000)\r\n            },\r\n            secondNavData: function (v) {\r\n\r\n            },\r\n            curPage: function (newV, oldV) {\r\n                if (this.curPage == 1) return;\r\n                this.getScrollList()\r\n            },\r\n            catId: function () {\r\n//                this.getInit()\r\n\r\n                var state = this.$store.state\r\n                this.$http.get(state.host + state.baseUrl + '/infoCat/getInfoCatlist?sCode=' + state.scode + '&catId=' + this.catId)\r\n                    .then(res => {\r\n                        this.$store.commit('CHANGE_LOADINGFLAG', false)\r\n                        var secondCatId = res.data.data.secondCatId\r\n                        this.CHANGE_SECONDNAVDATA(res.data.data.menu);\r\n                        for (var i = 0; i < this.secondNavData.length; i++) {\r\n                            if (secondCatId == this.secondNavData[i].catId) {\r\n                                this.activeIndex = i\r\n                                break\r\n                            }\r\n                        }\r\n\r\n                        i = i >= this.secondNavData.length ? 0 : i\r\n                        this.endFlag = false\r\n                        this.curPage = 1;\r\n                        var articleListCatId = ''\r\n                        var data = res.data.data.menu\r\n                        if (data[i].children.length > 0) {\r\n                            articleListCatId = data[i].children[0].catId\r\n                        } else {\r\n                            articleListCatId = data[i].catId\r\n                        }\r\n                        this.articleListCatId = articleListCatId\r\n\r\n\r\n                        sessionStorage.setItem('threeCatName', data[i].children.length > 0 ? data[i].children[0].name : '');\r\n\r\n\r\n                        this.CHANGE_SUBNAVDATA(data[i].children);\r\n                        if (this.$children[0].$refs.sub_navs_swiper_wrap) {\r\n                            this.$children[0].$refs.sub_navs_swiper_wrap.scrollLeft = 0;\r\n                            this.$children[0].tapIndex = 0;\r\n                            var state = this.$store.state\r\n                            this.$http.get(state.host + state.baseUrl + '/infoContent/getInfoContentlist?curPage=' + this.curPage + '&pageSize=20&catId=' + articleListCatId)\r\n                                .then(res => {\r\n                                    this.CHANGE_SUBCONDATA(res.data.data);\r\n                                    sessionStorage.setItem('subConData2', JSON.stringify(res.data.data));\r\n\r\n                                    //横向类名菜单定位优化\r\n\r\n                                    var totalWidth = 0;\r\n                                    var currentWidth = 0;\r\n                                    var allSlides = document.getElementsByClassName('swiper-slide');\r\n                                    var length = allSlides.length;\r\n                                    for (var r = 0; r < length; r++) {\r\n                                        if (r == this.activeIndex) {\r\n                                            currentWidth = parseFloat(getComputedStyle(allSlides[r]).width);\r\n                                            break;\r\n                                        } else {\r\n                                            var w = getComputedStyle(allSlides[r]).width;\r\n                                            totalWidth += parseFloat(w);\r\n                                        }\r\n                                    }\r\n                                    var _this = this;\r\n                                    var distance = parseFloat(getComputedStyle(_this.$refs.second_navs_swiper).width) / 2 - currentWidth / 2;\r\n\r\n                                    $('.second_navs_swiper').animate({scrollLeft: totalWidth - distance}, 300);\r\n\r\n\r\n                                }, err => {\r\n                                    console.log(err)\r\n                                })\r\n\r\n\r\n                            //    组件更新的时候配置微信SDK接口        *************************************************************************\r\n                            var state = this.$store.state\r\n                            var _this = this;\r\n\r\n                            var url = state.host + state.baseUrl + '/getJsSign'\r\n                            var data = {\r\n                                url: location.href.indexOf('from=') > -1 ? location.href.split('&from=')[0] : location.href.split('#')[0]\r\n                            }\r\n                            this.$http.post(url, data, {\r\n                                emulateJSON: true\r\n                            })\r\n                                .then(res => {\r\n                                    var data = res.data\r\n                                    wx.config({\r\n                                        debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n                                        appId: data.appId, // 必填，公众号的唯一标识\r\n                                        timestamp: data.timestamp, // 必填，生成签名的时间戳\r\n                                        nonceStr: data.nonce, // 必填，生成签名的随机串\r\n                                        signature: data.signature, // 必填，签名，见附录1\r\n                                        jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'translateVoice'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\r\n                                    });\r\n\r\n                                    wx.ready(function () {\r\n                                        wx.onMenuShareTimeline({\r\n                                            title: state.allSchoolInfo.name + '-' + state.secondNavData[_this.activeIndex].name, // 分享标题\r\n                                            //link: state.currentHref, // 分享链接\r\n                                            imgUrl: state.imgHost + state.allSchoolInfo.schoolIcon, // 分享图标\r\n                                            success: function () {\r\n                                                // 用户确认分享后执行的回调函数\r\n                                            },\r\n                                            cancel: function () {\r\n                                                // 用户取消分享后执行的回调函数\r\n                                            }\r\n                                        });\r\n\r\n                                        wx.onMenuShareAppMessage({\r\n                                            title: state.allSchoolInfo.name + '-' + state.secondNavData[_this.activeIndex].name, // 分享标题\r\n                                            desc: '点击查看' + state.secondNavData[_this.activeIndex].name, // 分享描述\r\n//                                    desc:urlAddToken(window.location.href),\r\n//                                link: state.currentHref, // 分享链接\r\n                                            link: (window.location.href.split('#')[0] + '&redirectUrl=' + encodeURIComponent(urlAddToken(window.location.href))).replace('/build/index.html', '/weixin/index'),\r\n                                            imgUrl: state.imgHost + state.allSchoolInfo.schoolIcon, // 分享图标\r\n                                            // type: 'music、video或link，不填默认为link', // 分享类型,music、video或link，不填默认为link\r\n                                            dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空\r\n                                            success: function () {\r\n                                                // 用户确认分享后执行的回调函数\r\n                                            },\r\n                                            cancel: function () {\r\n                                                // 用户取消分享后执行的回调函数\r\n                                            }\r\n                                        });\r\n\r\n                                    })\r\n\r\n                                    wx.error(function (err) {\r\n                                        // for (var i of Object.keys(err)) {\r\n                                        //     alert(i + ' : ' + err[i])\r\n                                        // }\r\n                                    })\r\n                                }, err => {\r\n                                    console.log(err)\r\n                                })\r\n\r\n\r\n                        }\r\n\r\n                        var _this = this;\r\n\r\n                    }, err => {\r\n                        this.$store.commit('CHANGE_LOADINGFLAG', false)\r\n                    })\r\n                this.activeIndex = 0;\r\n\r\n\r\n            }\r\n        },\r\n        created: function () {\r\n            var num=0;\r\n\r\n            this.$store.commit('CHANGE_LOADINGFLAG', true)\r\n//            this.getInit()\r\n\r\n\r\n            var state = this.$store.state\r\n            this.$http.get(state.host + state.baseUrl + '/infoCat/getInfoCatlist?sCode=' + state.scode + '&catId=' + this.catId)\r\n                .then(res => {\r\n\r\n//                    sessionStorage.setItem('threeCatName',res.data[0].name);\r\n                    this.$store.commit('CHANGE_LOADINGFLAG', false)\r\n                    var secondCatId = res.data.data.secondCatId\r\n                    this.CHANGE_SECONDNAVDATA(res.data.data.menu);\r\n                    for (var i = 0; i < this.secondNavData.length; i++) {\r\n                        if (secondCatId == this.secondNavData[i].catId) {\r\n                            num++;\r\n                            this.activeIndex = i\r\n                            break\r\n                        }\r\n                    }\r\n                    if(num==0){\r\n                        this.canFindCatId=0;\r\n                        //找不到catId相等的项，于是...\r\n                        //通过请求拿到二级类名\r\n                    }else{\r\n                        this.canFindCatId=1;\r\n                    }\r\n\r\n                    i = i >= this.secondNavData.length ? 0 : i\r\n                    this.endFlag = false\r\n                    this.curPage = 1;\r\n                    var articleListCatId = ''\r\n                    var data = res.data.data.menu\r\n                    if (data[i].children.length > 0) {\r\n                        articleListCatId = data[i].children[0].catId\r\n                    } else {\r\n                        articleListCatId = data[i].catId\r\n                    }\r\n\r\n                    if(!this.canFindCatId){\r\n                        this.articleListCatId=this.catId;\r\n                        articleListCatId=this.catId;\r\n                    }else{\r\n                        this.articleListCatId = articleListCatId\r\n                    }\r\n\r\n\r\n\r\n\r\n\r\n                    sessionStorage.setItem('threeCatName', data[i].children.length > 0 ? data[i].children[0].name : '');\r\n\r\n\r\n                    this.CHANGE_SUBNAVDATA(data[i].children);\r\n                    if (this.$children[0].$refs.sub_navs_swiper_wrap) {\r\n                        this.$children[0].$refs.sub_navs_swiper_wrap.scrollLeft = 0;\r\n                        this.$children[0].tapIndex = 0;\r\n                        var state = this.$store.state\r\n                        this.$http.get(state.host + state.baseUrl + '/infoContent/getInfoContentlist?curPage=' + this.curPage + '&pageSize=20&catId=' + articleListCatId)\r\n                            .then(res => {\r\n                                this.CHANGE_SUBCONDATA(res.data.data);\r\n\r\n//                                if(sessionStorage.getItem('subConData2')){\r\n//\r\n//                                }else{\r\n                                sessionStorage.setItem('subConData2', JSON.stringify(res.data.data));\r\n//                                }\r\n\r\n\r\n                                //横向类名菜单定位优化\r\n\r\n                                var totalWidth = 0;\r\n                                var currentWidth = 0;\r\n                                var allSlides = document.getElementsByClassName('swiper-slide');\r\n                                var length = allSlides.length;\r\n                                for (var r = 0; r < length; r++) {\r\n                                    if (r == this.activeIndex) {\r\n                                        currentWidth = parseFloat(getComputedStyle(allSlides[r]).width);\r\n                                        break;\r\n                                    } else {\r\n                                        var w = getComputedStyle(allSlides[r]).width;\r\n                                        totalWidth += parseFloat(w);\r\n                                    }\r\n                                }\r\n                                var _this = this;\r\n                                var distance = parseFloat(getComputedStyle(_this.$refs.second_navs_swiper).width) / 2 - currentWidth / 2;\r\n\r\n                                $('.second_navs_swiper').animate({scrollLeft: totalWidth - distance}, 300);\r\n\r\n\r\n                            }, err => {\r\n                                console.log(err)\r\n                            })\r\n\r\n\r\n                        //    组件更新的时候配置微信SDK接口        *************************************************************************\r\n                        var state = this.$store.state\r\n                        var _this = this;\r\n\r\n                        var url = state.host + state.baseUrl + '/getJsSign'\r\n                        var data = {\r\n                            url: location.href.indexOf('from=') > -1 ? location.href.split('&from=')[0] : location.href.split('#')[0]\r\n                        }\r\n                        this.$http.post(url, data, {\r\n                            emulateJSON: true\r\n                        })\r\n                            .then(res => {\r\n                                // console.log(res.data)\r\n                                var data = res.data\r\n                                wx.config({\r\n                                    debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n                                    appId: data.appId, // 必填，公众号的唯一标识\r\n                                    timestamp: data.timestamp, // 必填，生成签名的时间戳\r\n                                    nonceStr: data.nonce, // 必填，生成签名的随机串\r\n                                    signature: data.signature, // 必填，签名，见附录1\r\n                                    jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', 'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'translateVoice'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2\r\n                                });\r\n                                wx.ready(function () {\r\n                                    wx.onMenuShareTimeline({\r\n                                        title: state.allSchoolInfo.name + '-' + state.secondNavData[_this.activeIndex].name, // 分享标题\r\n                                        //link: state.currentHref, // 分享链接\r\n                                        imgUrl: state.imgHost + state.allSchoolInfo.schoolIcon, // 分享图标\r\n                                        success: function () {\r\n                                            // 用户确认分享后执行的回调函数\r\n                                        },\r\n                                        cancel: function () {\r\n                                            // 用户取消分享后执行的回调函数\r\n                                        }\r\n                                    });\r\n\r\n                                    wx.onMenuShareAppMessage({\r\n                                        title: state.allSchoolInfo.name + '-' + state.secondNavData[_this.activeIndex].name, // 分享标题\r\n                                        desc: '点击查看' + state.secondNavData[_this.activeIndex].name, // 分享描述\r\n//                                    desc:urlAddToken(window.location.href),\r\n//                                link: state.currentHref, // 分享链接\r\n                                        link: (window.location.href.split('#')[0] + '&redirectUrl=' + encodeURIComponent(urlAddToken(window.location.href))).replace('/build/index.html', '/weixin/index'),\r\n                                        imgUrl: state.imgHost + state.allSchoolInfo.schoolIcon, // 分享图标\r\n                                        // type: 'music、video或link，不填默认为link', // 分享类型,music、video或link，不填默认为link\r\n                                        dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空\r\n                                        success: function () {\r\n                                            // 用户确认分享后执行的回调函数\r\n                                        },\r\n                                        cancel: function () {\r\n                                            // 用户取消分享后执行的回调函数\r\n                                        }\r\n                                    });\r\n\r\n                                })\r\n\r\n                                wx.error(function (err) {\r\n                                    // for (var i of Object.keys(err)) {\r\n                                    //     alert(i + ' : ' + err[i])\r\n                                    // }\r\n                                })\r\n                            }, err => {\r\n                                console.log(err)\r\n                            })\r\n\r\n                    }\r\n\r\n                    var _this = this;\r\n                    setTimeout(() => {\r\n                        count(remote_ip_info.province, remote_ip_info.city, localStorage.scode, location.href, null, null, _this.$store.state.viewSourceUrl).then(res => {\r\n                        });\r\n                    }, 1000)\r\n\r\n                }, err => {\r\n                    this.$store.commit('CHANGE_LOADINGFLAG', false)\r\n                })\r\n            this.activeIndex = 0;\r\n\r\n\r\n            var state = this.$store.state\r\n            if (state.scholl) {\r\n                document.title = state.scholl.name\r\n            }\r\n            // piwik.initPiwik(state.identify, state.sid)\r\n        }\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// articleList.vue?54660f02","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"second_navs\",\n    style: ({\n      'border-bottom': '2px solid ' + _vm.$store.state.themeColor\n    })\n  }, [_c('div', {\n    ref: \"second_navs_prev\",\n    staticClass: \"second_navs_prev\",\n    staticStyle: {\n      \"display\": \"none\"\n    }\n  }), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"scroll\",\n      rawName: \"v-scroll\",\n      value: (_vm.scrollAction),\n      expression: \"scrollAction\"\n    }],\n    ref: \"second_navs_swiper\",\n    staticClass: \"swiper-container second_navs_swiper\"\n  }, [_c('div', {\n    staticClass: \"swiper-wrapper\"\n  }, _vm._l((_vm.secondNavData), function(obj, idx) {\n    return _c('div', {\n      class: obj.catId == _vm.secCatId ? 'swiper-slide active' : 'swiper-slide',\n      on: {\n        \"click\": function($event) {\n          _vm.tapAction(idx, obj.catId)\n        }\n      }\n    }, [_c('h4', {\n      style: ({\n        color: idx == _vm.activeIndex ? _vm.$store.state.themeColor : ''\n      }),\n      domProps: {\n        \"textContent\": _vm._s(obj.name)\n      }\n    })])\n  }))]), _vm._v(\" \"), _c('div', {\n    ref: \"second_navs_next\",\n    staticClass: \"second_navs_next\"\n  })]), _vm._v(\" \"), _c('div', {\n    key: (new Date()).getTime(),\n    staticClass: \"container\"\n  }, [_c('v-subNav', {\n    attrs: {\n      \"tapIndex\": _vm.tapIndex,\n      \"mySubConData2\": _vm.mySubConData2\n    }\n  })], 1)])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_vue-loader@11.3.4@vue-loader/lib/template-compiler?{\"id\":\"data-v-50d00940\"}!./~/_vue-loader@11.3.4@vue-loader/lib/selector.js?type=template&index=0!./src/weixin/views/articleList.vue\n// module id = 344\n// module chunks = 0"],"sourceRoot":""}